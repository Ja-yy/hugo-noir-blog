{{ define "main" }}
<div class="max-w-6xl mx-auto px-4 py-12">
  <h1
    class="text-4xl md:text-5xl font-bold mb-12 text-text-primary-light dark:text-text-primary-dark"
  >
    {{ .Title }}
  </h1>

  <div class="space-y-8">
    {{ range .Pages }}
    <article
      class="group border-b border-border-primary-light dark:border-border-primary-dark pb-8 last:border-b-0"
    >
      {{ if .Params.image }}
      <div class="mb-4 rounded-lg overflow-hidden">
        <img
          src="{{ .Params.image }}"
          alt="{{ .Title }}"
          class="w-full h-auto object-cover"
        />
      </div>
      {{ end }}

      <div
        class="flex items-center gap-2 text-text-secondary-light dark:text-text-secondary-dark text-sm mb-3"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="16"
          height="16"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path
            d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"
          ></path>
          <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
          <line x1="12" y1="22.08" x2="12" y2="12"></line>
        </svg>
        <span>Project</span>
      </div>

      {{ if .Params.link }}
      <a
        href="{{ .Params.link }}"
        class="block group"
        target="_blank"
        rel="noopener noreferrer"
      >
        <h2
          class="text-2xl md:text-3xl font-bold mb-3 text-text-primary-light dark:text-text-primary-dark group-hover:text-accent-light dark:group-hover:text-accent-dark transition-colors duration-300"
        >
          {{ .Title }}
        </h2>
      </a>
      {{ else }}
      <h2
        class="text-2xl md:text-3xl font-bold mb-3 text-text-primary-light dark:text-text-primary-dark"
      >
        {{ .Title }}
      </h2>
      {{ end }} {{/* Extract description from markdown content (first paragraph
      or summary) */}}
      <p
        class="text-text-secondary-light dark:text-text-secondary-dark mb-4 text-base leading-relaxed line-clamp-4"
      >
        {{ if .Summary }} {{ .Summary | plainify | truncate 200 }} {{ else }} {{
        .Content | plainify | truncate 200 }} {{ end }}
      </p>

      {{ if .Params.tech }}
      <div class="flex flex-wrap gap-2 mb-4">
        {{ $techs := split .Params.tech "," }} {{ range $tech := $techs }}
        <span
          class="px-3 py-1 bg-bg-primary-light dark:bg-bg-tertiary-dark text-text-secondary-light dark:text-text-secondary-dark border border-border-primary-light dark:border-border-primary-dark rounded-full text-sm font-medium transition-all duration-300 hover:border-accent-light dark:hover:border-accent-dark hover:text-accent-light dark:hover:text-accent-dark"
        >
          {{ trim $tech " " }}
        </span>
        {{ end }}
      </div>
      {{ end }} {{ if .Params.link }}
      <a
        href="{{ .Params.link }}"
        class="inline-flex items-center gap-2 text-accent-light dark:text-accent-dark hover:text-text-primary-light dark:hover:text-text-primary-dark transition-colors duration-300 font-medium"
        target="_blank"
        rel="noopener noreferrer"
      >
        View on GitHub
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="16"
          height="16"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path d="m9 18 6-6-6-6"></path>
        </svg>
      </a>
      {{ end }}
    </article>
    {{ end }}
  </div>
</div>

<style>
  .line-clamp-4 {
    display: -webkit-box;
    -webkit-line-clamp: 4;
    line-clamp: 4;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
  }
</style>
{{ end }}
